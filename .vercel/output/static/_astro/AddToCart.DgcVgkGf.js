import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.BJfUAbRs.js";const g=({open:s,onClose:n})=>{const o=a.useRef(null),[u,i]=a.useState(s),[l,d]=a.useState(!1),[m,r]=a.useState([]);return a.useEffect(()=>{if(s){i(!0),requestAnimationFrame(()=>d(!0));const e=localStorage.getItem("cartItems");r(e?JSON.parse(e):[])}else{d(!1);const e=setTimeout(()=>i(!1),500);return()=>clearTimeout(e)}},[s]),a.useEffect(()=>{function e(c){s&&o.current&&!o.current.contains(c.target)&&n()}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s,n]),u?t.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[t.jsx("div",{className:`absolute inset-0 bg-black/20 transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`}),t.jsxs("div",{ref:o,className:`
          relative w-80 max-h-full p-6 shadow-lg bg-white text-black overflow-y-auto
          transform transition-transform duration-500 ease-in-out
          ${l?"translate-x-0":"translate-x-full"}
          flex flex-col
        `,children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-xl font-semibold",children:"ðŸ›’ Your Cart"}),t.jsx("button",{onClick:n,className:"text-2xl font-bold",children:"Ã—"})]}),m.length===0?t.jsx("p",{className:"text-center text-gray-500",children:"Your cart is empty."}):t.jsx("ul",{className:"flex flex-col gap-4",children:m.map(e=>t.jsxs("li",{className:"flex items-center gap-4 border-b pb-2",children:[t.jsx("img",{src:e.image,alt:e.title,className:"w-16 h-16 object-cover rounded"}),t.jsxs("div",{className:"flex flex-col flex-grow",children:[t.jsx("span",{className:"font-semibold",children:e.title}),t.jsxs("span",{className:"text-green-600 font-bold",children:["$",e.price.toFixed(2)]})]})]},e.productId))})]})]}):null},h=5,b=({productId:s,productTitle:n,productImage:o,productPrice:u})=>{const[i,l]=a.useState(!1),d=r=>{const e=Date.now();return r.filter(c=>e-c.timestamp<h*60*1e3)},m=()=>{try{const r=JSON.parse(localStorage.getItem("cartItems")||"[]"),e=d(r),c={productId:s,title:n,image:o,price:u,timestamp:Date.now()},f=[...e.filter(x=>x.productId!==s),c];localStorage.setItem("cartItems",JSON.stringify(f)),l(!0)}catch(r){console.error("Error adding item to cart:",r)}};return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:m,className:"mt-4 cursor-pointer w-full bg-gradient-to-r from-main to-green-600 text-white py-2 rounded-lg shadow hover:brightness-110 transition-all duration-300",children:"Add to Cart"}),t.jsx(g,{open:i,onClose:()=>l(!1)})]})};export{b as default};
